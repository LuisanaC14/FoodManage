{% extends "admin/change_list.html" %}
{% load static %}

{% block extrahead %}
{{ block.super }}
<style>
    /* =========================================================
       1. FUERZA BRUTA CONTRA BORDES ROJOS (CSS !important)
       ========================================================= */
    
    /* Inputs de Texto (Coordenadas X/Y) */
    #result_list input[type="text"], 
    #result_list input[type="number"] {
        background-color: #0f0f0f !important;
        border: 1px solid #333 !important;  /* Borde Gris Oscuro */
        color: #00eaff !important;          /* Texto Cyan */
        border-radius: 5px !important;
        padding: 5px !important;
        text-align: center !important;
        height: 35px !important;
        box-shadow: none !important;
    }

    /* Desplegables (Selectores de Forma) - AQUÍ MATAMOS EL ROJO */
    #result_list select {
        background-color: #0f0f0f !important;
        border: 1px solid #333 !important;  /* Borde Gris Oscuro */
        color: #fff !important;
        border-radius: 5px !important;
        padding: 5px !important;
        height: 35px !important;
        cursor: pointer !important;
        box-shadow: none !important;
        outline: none !important; /* Quita el borde de selección del navegador */
    }

    /* EFECTO AL DAR CLIC (FOCUS) - Se ilumina Cyan en vez de Azul/Rojo */
    #result_list input:focus, 
    #result_list select:focus {
        border-color: #00eaff !important;
        box-shadow: 0 0 8px rgba(0, 234, 255, 0.3) !important;
        outline: none !important;
    }

    /* =========================================================
       2. ESTILOS DE LA TABLA (Para que se vea elegante)
       ========================================================= */
    
    /* Encabezados */
    #result_list thead th {
        background-color: #0a0a0a !important;
        border-bottom: 2px solid #333 !important;
        color: #888 !important;
        text-transform: uppercase;
        font-size: 0.75rem !important;
        padding: 15px 10px !important;
    }
    
    /* Filas */
    #result_list tbody tr {
        background-color: #151515 !important;
        border-bottom: 1px solid #222 !important;
    }
    
    #result_list tbody tr:hover {
        background-color: #1f1f1f !important;
    }

    /* Celdas */
    #result_list tbody td {
        vertical-align: middle !important;
        padding: 10px !important;
        border: none !important;
    }

    /* Botón Editar Personalizado */
    .btn-admin-edit {
        background: #222 !important;
        border: 1px solid #444 !important;
        color: #00eaff !important;
        padding: 6px 12px !important;
        border-radius: 6px !important;
        display: inline-block !important;
        transition: 0.3s !important;
    }
    .btn-admin-edit:hover {
        background: #00eaff !important;
        color: #000 !important;
        box-shadow: 0 0 10px #00eaff !important;
    }

    /* =========================================
       RESPONSIVIDAD LISTA DE MESAS
       ========================================= */
    @media (max-width: 992px) {
        /* 1. Botones Superiores (Añadir y Ver Mapa) */
        .object-tools {
            display: flex !important;
            flex-direction: column !important; /* Uno sobre otro */
            gap: 10px !important;
            float: none !important;
            margin-bottom: 20px !important;
        }

        .object-tools li {
            width: 100% !important;
            margin: 0 !important;
        }

        .object-tools a {
            display: flex !important;
            justify-content: center !important;
            padding: 12px !important;
            font-size: 0.9rem !important;
            border-radius: 10px !important;
        }

        /* 2. Leyenda de Zonas (Referencia) */
        /* La convertimos en una fila deslizable o apilada */
        div[style*="display: flex; gap: 20px"] {
            flex-direction: column !important;
            align-items: flex-start !important;
            gap: 12px !important;
            padding: 15px !important;
        }

        div[style*="display: flex; gap: 20px"] > div {
            width: 100%;
            justify-content: flex-start !important;
        }

        /* 3. Tabla de Edición (Scroll para no romper el diseño) */
        #changelist-form {
            overflow-x: auto !important;
            display: block !important;
        }

        #result_list {
            min-width: 600px !important; /* Forzamos ancho para que los inputs no se aplasten */
        }

        /* Inputs más cómodos para el dedo */
        #result_list input {
            height: 40px !important;
            font-size: 1rem !important;
        }

    /* AJUSTE FINAL DE BOTONES (TAMAÑO REDUCIDO Y SIMETRÍA) */
    .object-tools {
        display: flex !important;
        gap: 10px !important;
        float: right !important;
        margin: 0 !important;
        padding: 0 !important;
        list-style: none !important;
        align-items: center !important;
    }

    .object-tools li {
        margin: 0 !important;
        display: flex !important;
    }

    /* Estilo Base del Botón */
    .object-tools a, 
    .object-tools a.addlink {
        height: 38px !important;       /* Más compacto */
        min-width: 140px !important;   /* Ancho controlado */
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
        padding: 0 12px !important;
        border-radius: 6px !important;
        font-weight: 700 !important;
        font-size: 0.68rem !important; /* Letra más pequeña para que quepa bien */
        text-transform: uppercase !important;
        transition: all 0.2s ease-in-out !important;
        border: none !important;
        text-decoration: none !important;
        box-shadow: 0 3px 10px rgba(0,0,0,0.3) !important; /* Sombra para que parezca botón */
    }

    /* Botón Distribución (Morado) */
    .btn-distribucion-compact {
        background: #a300ff !important;
        color: #fff !important;
    }
    .btn-distribucion-compact:hover {
        background: #b533ff !important;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(163, 0, 255, 0.4) !important;
    }

    /* Botón Añadir (Verde) */
    .object-tools a.addlink {
        background: #00c292 !important;
        color: #fff !important;
        margin-left: 0 !important;
    }
    .object-tools a.addlink:hover {
        background: #00e0a8 !important;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 194, 146, 0.4) !important;
    }
    }
</style>
{% endblock %}

{% block object-tools-items %}
    <li>
        <a href="/admin/gestion/reserva/add/#seccion-mapa" class="btn-distribucion" style="background: #a300ff; color: #fff; text-decoration: none; padding: 10px 20px; border-radius: 8px; font-weight: bold; display: inline-flex; align-items: center; gap: 8px;">
            <i class="fas fa-map-marked-alt"></i> VER DISTRIBUCIÓN EN VIVO
        </a>
    </li>
    {{ block.super }}
{% endblock %}

{% block content %}
    {# LEYENDA DE PISOS #}
    <div style="display: flex; gap: 20px; margin-bottom: 25px; align-items: center; background: #0a0a0a; padding: 15px 25px; border-radius: 10px; border-left: 4px solid #fff;">
        <span style="color: #666; font-size: 0.8rem; font-weight: 900; text-transform: uppercase;">REFERENCIA DE ZONAS:</span>
        <div style="display: flex; align-items: center; gap: 8px;">
            <div style="width: 10px; height: 10px; background: #ffcc00; border-radius: 50%; box-shadow: 0 0 10px #ffcc00;"></div>
            <span style="color: #fff; font-size: 0.85rem;">Piso 1 (Planta Baja)</span>
        </div>
        <div style="display: flex; align-items: center; gap: 8px;">
            <div style="width: 10px; height: 10px; background: #00eaff; border-radius: 50%; box-shadow: 0 0 10px #00eaff;"></div>
            <span style="color: #fff; font-size: 0.85rem;">Piso 2 (Terraza)</span>
        </div>
        <div style="flex-grow: 1; text-align: right;">
            <span style="color: #444; font-size: 0.75rem; font-style: italic;">
                <i class="fas fa-lightbulb"></i> Tip: Edita la posición X/Y directamente aquí.
            </span>
        </div>
    </div>
    {{ block.super }}
{% endblock %}